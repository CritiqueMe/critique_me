!!! 5
-# paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/
<!--[if lt IE 7]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if gt IE 8]><!-->
%html.no-js{ :lang => "en" }
  <!--<![endif]-->
  %head{:prefix => "og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# #{SEED_BLOCKS_ENGINE_CONFIG[:fb_app_namespace]}: http://ogp.me/ns/fb/#{SEED_BLOCKS_ENGINE_CONFIG[:fb_app_namespace]}#"}
    %meta{ :charset => "utf-8" }/
    %meta{ "http-equiv" => "X-UA-Compatible", :content => "IE=edge,chrome=1" }/
    %title= @question.question_text
    %meta{ :name => "description", :content => "CritiqueMe" }/
    %meta{ :name => "author", :content => "critiqueme.com" }/

    %meta{ :property => "fb:app_id", :content => "#{SEED_BLOCKS_ENGINE_CONFIG[:fb_app_id]}" }
    %meta{ :property => "og:type", :content => "#{SEED_BLOCKS_ENGINE_CONFIG[:fb_app_namespace]}:question" }
    %meta{ :property => "og:url", :content => "#{question_url(@question)}" }
    %meta{ :property => "og:title", :content => @question.question_text }
    %meta{ :property => "og:description", :content => "Answer the question now!" }
    - if @question.photo.url
      %meta{ :property => "og:image", :content => @question.photo.url }

    -# Mobile viewport optimized: j.mp/bplateviewport
    %meta{ :name => "viewport", :content => "width=device-width, initial-scale=1.0" }/

    = stylesheet_link_tag 'splash/screen.css', :media => 'screen, projection'
    = stylesheet_link_tag 'dashboard/screen.css', :media => 'screen, projection'
    = stylesheet_link_tag 'questions/screen.css', :media => 'screen, projection'
    = stylesheet_link_tag "share/share"
    = stylesheet_link_tag 'jquery-ui-smoothness.css'
    /[if IE]
      = stylesheet_link_tag 'ie.css', :media => 'screen, projection'
    = yield :extra_css

    -# All JavaScript at the bottom, except for Modernizr and Respond.
    -# Modernizr enables HTML5 elements & feature detects; Respond is a polyfill for min/max-width CSS3 Media Queries
    = javascript_include_tag "modernizr.min.js", "respond.min.js"

  %body
    -# 24-column grid layout courtesy of blueprint
    .container
      = render :partial => "partials/header"
      = render :partial => "dashboard/dash_nav"

      #qpage.prepend-1.span-22.append-1.prepend-top.append-bottom
        .byline #{@question.user.first_last_initial} asked:

        - @questions.each do |q|
          - if q.photo.url
            .qimage= image_tag q.photo.thumb.url
          .qcontent
            - if @user
              - if @user == q.user
                .buttons.share_question{:data => {:question_id => q.id}}
                  = button_to "Share with Friends", '#'
              - elsif @user.answers.where(:question_id => q.id).count == 0
                .buttons.post_answer
                  = button_to "Post Answer", '#', :data => {:question_id => q.id}
            .qtext= q.question_text
            .answers
              .header Answers Posted
              - if q.answers.count < 5
                #not_enough_answers
                  - if q.user == @user
                    - if q.answers.count > 0
                      You've only gotten #{pluralize q.answers.count, 'answer'} so far!  You must get at least 5 answers to see the results.
                    - else
                      You haven't gotten any answers to your question yet!
                  - else
                    Not enough answers have been posted yet!
              - elsif q.question_type == Question::QUESTION_TYPES.index(:open_text)
                %ol
                  - q.answers.each do |a|
                    %li= a.open_text_answer
              - elsif q.question_type == Question::QUESTION_TYPES.index(:multiple_choice)
                %ol
                  - q.multiple_choice_options.each do |mco|
                    %li
                      %b= mco.answer_text
                      %em (#{q.answers.where(:multiple_choice_option_id => mco.id).count})
              - elsif q.question_type == Question::QUESTION_TYPES.index(:true_false)
                %ol
                  %li
                    %b True
                    %em (#{q.answers.where(:true_false_answer => true).count})
                  %li
                    %b False
                    %em (#{q.answers.where(:true_false_answer => false).count})

              - if a = @user.answers.where(:question_id => q.id).first
                #your_answer
                  %span Your Answer:
                  - if q.question_type == Question::QUESTION_TYPES.index(:open_text)
                    = a.open_text_answer
                  - elsif q.question_type == Question::QUESTION_TYPES.index(:true_false)
                    = a.true_false_answer
                  - elsif q.question_type == Question::QUESTION_TYPES.index(:multiple_choice)
                    = a.multiple_choice_option.answer_text

              = render :partial => "/questions/answer", :locals => {:question => q, :post_url => post_url}

      = render :partial => "partials/footer"

    #share_dialog{:data => {:question_id => @question.id}}
    #post_share_dialog

    #powered_by_sb= link_to image_tag("dashboard/PoweredBySB.png"), "http://www.seedblocks.com", :target => "_blank"


    = javascript_include_tag "application"
    = javascript_include_tag "jquery-ui-1.8.15.min.js"
    = javascript_include_tag "questions/answer_question"

    - if @question.user == @user && @question.answers.count < 5
      = javascript_include_tag "questions/show_share"
      = javascript_include_tag "share/share"

    = yield :extra_javascripts